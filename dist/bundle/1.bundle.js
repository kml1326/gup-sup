exports.ids=[1],exports.modules={113:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(8),s=n(13);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=i(t).call(this,e),n=!a||"object"!==c(a)&&"function"!=typeof a?u(r):a,m(u(n),"componentWillMount",(function(){fetch("http://localhost:8000/api/allUser").then((function(e){return e.json()})).then((function(e){n.setState({listOfUser:e.listOfUser})})),fetch("http://localhost:8000/api/allChannel").then((function(e){return e.json()})).then((function(e){n.setState({listOfChannel:e.listOfChannel})}))})),m(u(n),"handleChannel",(function(e){n.props.openedChannelChatRoom(e.target.id)})),m(u(n),"handleUser",(function(e){n.props.setToUser({toUser:e.target.id,fromUser:n.props.currentUser._id})})),n.state={listOfUser:[],listOfChannel:[]},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state,n=t.listOfChannel,r=t.listOfUser,o=this.props.currentUser?this.props.currentUser.username:"";return a.a.createElement("aside",{className:"side-bar"},a.a.createElement("p",{className:"title-container"},a.a.createElement("span",{className:"user-name"},o),a.a.createElement("a",{href:"/logout",className:"right logout"},"logout")),a.a.createElement("div",null,a.a.createElement("input",{type:"text",className:"searchBox",placeholder:"Jump to ..."})),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("p",{className:"title-container"},a.a.createElement("span",{className:"title"},"Channels"),a.a.createElement("a",{title:"Create a channel",href:"/create",className:"right add-channel"},"+")),n.length&&n.map((function(t,n){return a.a.createElement("p",{key:n,className:e.props.toChannel==t._id?"selected channel-list":"channel-list",id:t._id,onClick:e.handleChannel},a.a.createElement("span",{className:"channel-logo"},"$")," ",t.name)})))),a.a.createElement("div",null,a.a.createElement("p",{className:"title-container"},a.a.createElement("span",{className:"title"},"Direct Messages")),r&&r.map((function(t,n){return t.username===o?a.a.createElement("p",{key:n,className:e.props.toUser==t._id?"selected username-list":"username-list",id:t._id,onClick:e.handleUser},a.a.createElement("span",{className:"online-user"}),t.username,"(you)"):a.a.createElement("p",{key:n,className:e.props.toUser==t._id?"selected username-list":"username-list",id:t._id,onClick:e.handleUser},a.a.createElement("span",{className:"offline-user"}),t.username)}))))}}])&&l(n.prototype,r),o&&l(n,o),t}(r.Component);var h=Object(o.b)((function(e){return{currentUser:e.currentUser,toUser:e.toUser,toChannel:e.toChannel}}),(function(e){return{dispatch:e,setToUser:function(t){return e(Object(s.f)(t))},openedChannelChatRoom:function(t){return e(Object(s.e)(t))}}}))(p),b=n(60),y=n.n(b);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,v(t).call(this,e))).state={message:"",messages:[],listOfUser:[]},n.socket=y()("localhost:8000"),n.socket.emit("ONLINE",{userId:n.props.currentUser._id}),n.socket.on("RECEIVE_CHANNEL_MESSAGE",(function(e){r(e)}));var r=function(e){n.props.addMessages(n.props.toChannel)};return n.handleChange=function(e){var t,r,a;n.setState((t={},r=e.target.name,a=e.target.value,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))},n.handleSendMessage=function(e){e.preventDefault(),n.socket.emit("SEND_CHANNEL_MESSAGE",{toChannel:n.props.toChannel,author:n.props.currentUser.username,message:n.state.message}),n.setState({message:""})},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.currentChannel,n=e.currentUser;return a.a.createElement("div",{className:"chatArea"},a.a.createElement("div",{className:"chatContainer"},a.a.createElement("h1",{className:"center name"},this.props.currentChannel.name),t.messages&&t.messages.map((function(e,t){return a.a.createElement("div",{className:"message-info-container",key:t},e.username===n.username?a.a.createElement("span",{className:"message-user-img"}):a.a.createElement("span",{className:"message-user-img msg-usr-background"}),a.a.createElement("div",{className:"message-info"},a.a.createElement("span",{className:"user-name"},e.username)," ",a.a.createElement("span",null,e.message)))}))),a.a.createElement("form",{onSubmit:this.handleSendMessage,className:"sendMsgForm"},a.a.createElement("input",{name:"message",className:"input message-box",value:this.state.message,onChange:this.handleChange,placeholder:"Message"})))}}])&&g(n.prototype,r),o&&g(n,o),t}(r.Component);var _=Object(o.b)((function(e){return{currentUser:e.currentUser,currentChannel:e.selectedChannelInfo,toChannel:e.toChannel}}),(function(e){return{addMessages:function(t){return e(Object(s.a)(t))}}}))(U);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=S(t).call(this,e),n=!a||"object"!==C(a)&&"function"!=typeof a?j(r):a,k(j(n),"componentWillMount",(function(){fetch("http://localhost:8000/api/allUser").then((function(e){return e.json()})).then((function(e){n.setState({listOfUser:e.listOfUser})}))})),n.state=k({message:"",listOfUser:[],messages:[]},"listOfUser",[]),n.socket=y()("localhost:8000"),n.socket.emit("ONLINE",{userId:n.props.currentUser._id}),n.socket.on("RECEIVE_PRIVATE_MESSAGE",(function(e){console.log(e,"received msg"),o(e)}));var o=function(e){var t={toUser:n.props.toUser,fromUser:n.props.currentUser._id,messages:e};n.props.addMessage(t)};return n.handleChange=function(e){n.setState(k({},e.target.name,e.target.value))},n.handleSendMessage=function(e){e.preventDefault();var t=n.state.message,r=n.props,a=r.currentUser,o=r.toUser;n.socket.emit("SEND_PRIVATE_MESSAGE",{toUser:o,fromUser:a._id,message:t}),n.setState({message:""})},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.toUser,r=e.messages;return a.a.createElement("div",{className:"chatArea"},a.a.createElement("div",null,this.state.listOfUser.map((function(e,t){if(e._id===n)return a.a.createElement("h1",{key:t,className:"center name"},e.name)})),r.map((function(e,n){return e.fromUser===t._id?a.a.createElement("div",{key:n,className:"currentUser-msg-wrap"},a.a.createElement("span",{className:"right currentUser-msg"},e.message," ")):a.a.createElement("div",{key:n,className:"anotherUser-msg-wrap"},a.a.createElement("span",{className:"anotherUser-msg"},e.message," "))}))),a.a.createElement("form",{onSubmit:this.handleSendMessage,className:"sendMsgForm"},a.a.createElement("input",{name:"message",className:"input message-box",value:this.state.message,onChange:this.handleChange,placeholder:"Message"})))}}])&&N(n.prototype,r),o&&N(n,o),t}(r.Component);var M=Object(o.b)((function(e){return{currentUser:e.currentUser,toUser:e.toUser,messages:e.selectedUserMessages}}),(function(e){return{addMessage:function(t){return e(Object(s.b)(t))}}}))(P);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(){return A(this,t),x(this,I(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.toUser,n=e.toChannel;return a.a.createElement("div",{className:"dashboard"},a.a.createElement(h,null),t?a.a.createElement(M,null):n?a.a.createElement(_,null):a.a.createElement("div",{className:"news-feed"},a.a.createElement("p",{className:"news-feed-content center"},"The NewsFeed area still in the making process, so please select any friends or channel Chat-Room-Area.")))}}])&&R(n.prototype,r),o&&R(n,o),t}(r.Component);t.default=Object(o.b)((function(e){return{toUser:e.toUser,toChannel:e.toChannel}}))(G)}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQXNpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NoYW5uZWxNZXNzYWdlLmpzIiwid2VicGFjazovLy8uL2NsaWVudC9zcmMvY29tcG9uZW50cy9Qcml2YXRlTWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvRGFzaGJvYXJkLmpzIl0sIm5hbWVzIjpbIkFzaWRlIiwicHJvcHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGF0YSIsInNldFN0YXRlIiwibGlzdE9mVXNlciIsImxpc3RPZkNoYW5uZWwiLCJlIiwib3BlbmVkQ2hhbm5lbENoYXRSb29tIiwidGFyZ2V0IiwiaWQiLCJzZXRUb1VzZXIiLCJ0b1VzZXIiLCJmcm9tVXNlciIsImN1cnJlbnRVc2VyIiwiX2lkIiwic3RhdGUiLCJ0aGlzIiwidXNlcm5hbWUiLCJjbGFzc05hbWUiLCJocmVmIiwidHlwZSIsInBsYWNlaG9sZGVyIiwidGl0bGUiLCJsZW5ndGgiLCJtYXAiLCJjaGFubmVsIiwiaSIsImtleSIsInRvQ2hhbm5lbCIsIm9uQ2xpY2siLCJoYW5kbGVDaGFubmVsIiwibmFtZSIsInVzZXIiLCJoYW5kbGVVc2VyIiwiQ29tcG9uZW50IiwiY29ubmVjdCIsImRpc3BhdGNoIiwidXNlcklkIiwic2V0VG9Vc2VyQWN0aW9uIiwiY2hhbm5lbElkIiwib3BlbmVkQ2hhbm5lbENoYXRSb29tQWN0aW9uIiwiQ2hhbm5lbE1lc3NhZ2UiLCJtZXNzYWdlIiwibWVzc2FnZXMiLCJzb2NrZXQiLCJpbyIsImVtaXQiLCJvbiIsImFkZE1lc3NhZ2UiLCJtZXNzYWdlSW5mbyIsImFkZE1lc3NhZ2VzIiwiaGFuZGxlQ2hhbmdlIiwidmFsdWUiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInByZXZlbnREZWZhdWx0IiwiYXV0aG9yIiwiY3VycmVudENoYW5uZWwiLCJtc2ciLCJvblN1Ym1pdCIsIm9uQ2hhbmdlIiwic2VsZWN0ZWRDaGFubmVsSW5mbyIsImFkZENoYW5uZWxNZXNzYWdlc0FjdGlvbiIsIlByaXZhdGVNZXNzYWdlIiwidXNlcnMiLCJjb25zb2xlIiwibG9nIiwibXNnRGV0YWlscyIsInNlbGVjdGVkVXNlck1lc3NhZ2VzIiwiYWRkTWVzc2FnZXNBY3Rpb24iLCJEYXNoYm9hcmQiXSwibWFwcGluZ3MiOiIyOEJBR01BLEUsWUFFSixXQUFZQyxHQUFPLE0sSUFBQSxPLDRGQUFBLFMsRUFDakIsSyxFQUFBLGVBQU1BLEdBQU4sRyxnREFEaUIsNkJBU0UsV0FFbkJDLE1BQU0scUNBQ0xDLE1BQUssU0FBQUMsR0FBRyxPQUFJQSxFQUFJQyxVQUNoQkYsTUFBSyxTQUFBRyxHQUNKLEVBQUtDLFNBQVMsQ0FDWkMsV0FBWUYsRUFBS0UsZ0JBSXJCTixNQUFNLHdDQUNMQyxNQUFLLFNBQUFDLEdBQUcsT0FBSUEsRUFBSUMsVUFDaEJGLE1BQUssU0FBQUcsR0FDSixFQUFLQyxTQUFTLENBQ1pFLGNBQWVILEVBQUtHLHNCQXZCUCx3QkE2QkgsU0FBQ0MsR0FDZixFQUFLVCxNQUFNVSxzQkFBc0JELEVBQUVFLE9BQU9DLE9BOUJ6QixxQkFrQ04sU0FBQ0gsR0FDWixFQUFLVCxNQUFNYSxVQUFVLENBQUNDLE9BQVFMLEVBQUVFLE9BQU9DLEdBQUlHLFNBQVUsRUFBS2YsTUFBTWdCLFlBQVlDLFNBakM1RSxFQUFLQyxNQUFRLENBQ1hYLFdBQVksR0FDWkMsY0FBZSxJQUpBLEUsZ1NBc0NWLGFBQytCVyxLQUFLRCxNQUFuQ1YsRUFERCxFQUNDQSxjQUFlRCxFQURoQixFQUNnQkEsV0FDaEJhLEVBQVlELEtBQUtuQixNQUFNZ0IsWUFBY0csS0FBS25CLE1BQU1nQixZQUFZSSxTQUFXLEdBRTlFLE9BQ0UsMkJBQU9DLFVBQVUsWUFDZix1QkFBR0EsVUFBVSxtQkFDWCwwQkFBTUEsVUFBVSxhQUFhRCxHQUM3Qix1QkFBR0UsS0FBSyxVQUFVRCxVQUFVLGdCQUE1QixXQUVGLDZCQUNFLDJCQUFPRSxLQUFLLE9BQU9GLFVBQVUsWUFBWUcsWUFBWSxpQkFFdkQsNkJBQ0UsNkJBQ0UsdUJBQUdILFVBQVUsbUJBQ1gsMEJBQU1BLFVBQVUsU0FBaEIsWUFDQSx1QkFBR0ksTUFBTSxtQkFBbUJILEtBQUssVUFBVUQsVUFBVSxxQkFBckQsTUFHRmIsRUFBY2tCLFFBQVVsQixFQUFjbUIsS0FBSSxTQUFDQyxFQUFTQyxHQUNsRCxPQUFPLHVCQUFHQyxJQUFLRCxFQUFHUixVQUFXLEVBQUtyQixNQUFNK0IsV0FBYUgsRUFBUVgsSUFBTSx3QkFBMEIsZUFDM0ZMLEdBQUlnQixFQUFRWCxJQUFLZSxRQUFTLEVBQUtDLGVBQWUsMEJBQU1aLFVBQVUsZ0JBQWhCLEtBRHpDLElBQ2tGTyxFQUFRTSxXQU12Ryw2QkFDRSx1QkFBR2IsVUFBVSxtQkFDWCwwQkFBTUEsVUFBVSxTQUFoQixvQkFHQWQsR0FBY0EsRUFBV29CLEtBQUksU0FBQ1EsRUFBTU4sR0FDbEMsT0FBR00sRUFBS2YsV0FBYUEsRUFDWix1QkFBR1UsSUFBS0QsRUFBR1IsVUFBVyxFQUFLckIsTUFBTWMsUUFBVXFCLEVBQUtsQixJQUFNLHlCQUEyQixnQkFDeEZMLEdBQUl1QixFQUFLbEIsSUFBS2UsUUFBUyxFQUFLSSxZQUFZLDBCQUFNZixVQUFVLGdCQUFzQmMsRUFBS2YsU0FENUUsU0FHSyx1QkFBR1UsSUFBS0QsRUFBR1IsVUFBVyxFQUFLckIsTUFBTWMsUUFBVXFCLEVBQUtsQixJQUFNLHlCQUEyQixnQkFDN0ZMLEdBQUl1QixFQUFLbEIsSUFBS2UsUUFBUyxFQUFLSSxZQUFZLDBCQUFNZixVQUFVLGlCQUF1QmMsRUFBS2Ysb0IsOEJBL0VoRmlCLGFBeUdMQyxtQkFoQmYsU0FBeUJwQixHQUN2QixNQUFPLENBQ0xGLFlBQWFFLEVBQU1GLFlBQ25CRixPQUFRSSxFQUFNSixPQUNkaUIsVUFBV2IsRUFBTWEsY0FJckIsU0FBNEJRLEdBQzFCLE1BQU8sQ0FDTEEsV0FDQTFCLFVBQVcsU0FBQzJCLEdBQUQsT0FBWUQsRUFBU0UsWUFBZ0JELEtBQ2hEOUIsc0JBQXVCLFNBQUNnQyxHQUFELE9BQWVILEVBQVNJLFlBQTRCRCxRQUloRUosQ0FBNkN2QyxHLDR6QkN2R3RENkMsRSxZQUVKLFdBQVk1QyxHQUFPLE8sNEZBQUEsVUFDakIsd0JBQU1BLEtBQ0RrQixNQUFRLENBQ1gyQixRQUFTLEdBQ1RDLFNBQVUsR0FDVnZDLFdBQVksSUFHZCxFQUFLd0MsT0FBU0MsSUFBRyxrQkFFakIsRUFBS0QsT0FBT0UsS0FBSyxTQUFVLENBQUVULE9BQVEsRUFBS3hDLE1BQU1nQixZQUFZQyxNQUU1RCxFQUFLOEIsT0FBT0csR0FBRywyQkFBMkIsU0FBUzdDLEdBQ2pEOEMsRUFBVzlDLE1BR2IsSUFBTThDLEVBQWEsU0FBQUMsR0FDakIsRUFBS3BELE1BQU1xRCxZQUFZLEVBQUtyRCxNQUFNK0IsWUFqQm5CLE9Bb0JqQixFQUFLdUIsYUFBZSxTQUFDN0MsRyxVQUNuQixFQUFLSCxVLEVBQUwsRyxFQUNHRyxFQUFFRSxPQUFPdUIsSyxFQUFPekIsRUFBRUUsT0FBTzRDLE0sa0dBSTlCLEVBQUtDLGtCQUFvQixTQUFDL0MsR0FDeEJBLEVBQUVnRCxpQkFDRixFQUFLVixPQUFPRSxLQUFLLHVCQUF3QixDQUN2Q2xCLFVBQVcsRUFBSy9CLE1BQU0rQixVQUN0QjJCLE9BQVEsRUFBSzFELE1BQU1nQixZQUFZSSxTQUMvQnlCLFFBQVMsRUFBSzNCLE1BQU0yQixVQUV0QixFQUFLdkMsU0FBUyxDQUFDdUMsUUFBUyxNQWpDVCxFLGdTQXFDVixNQUNpQzFCLEtBQUtuQixNQUFyQzJELEVBREQsRUFDQ0EsZUFBZ0IzQyxFQURqQixFQUNpQkEsWUFDeEIsT0FDRSx5QkFBS0ssVUFBVSxZQUNiLHlCQUFLQSxVQUFVLGlCQUNiLHdCQUFJQSxVQUFVLGVBQWVGLEtBQUtuQixNQUFNMkQsZUFBZXpCLE1BRXBEeUIsRUFBZWIsVUFDaEJhLEVBQWViLFNBQVNuQixLQUFJLFNBQUNpQyxFQUFLL0IsR0FDaEMsT0FBTyx5QkFBS1IsVUFBVSx5QkFBeUJTLElBQUtELEdBRS9DK0IsRUFBSXhDLFdBQWFKLEVBQVlJLFNBQzlCLDBCQUFNQyxVQUFVLHFCQUNoQiwwQkFBTUEsVUFBVSx3Q0FFbEIseUJBQUtBLFVBQVUsZ0JBQ2IsMEJBQU1BLFVBQVUsYUFBYXVDLEVBQUl4QyxVQURuQyxJQUNvRCw4QkFBT3dDLEVBQUlmLGVBTXZFLDBCQUFNZ0IsU0FBVTFDLEtBQUtxQyxrQkFBbUJuQyxVQUFVLGVBQ2hELDJCQUFPYSxLQUFLLFVBQVViLFVBQVUsb0JBQW9Ca0MsTUFBT3BDLEtBQUtELE1BQU0yQixRQUFTaUIsU0FBVTNDLEtBQUttQyxhQUFjOUIsWUFBWSxtQiw4QkE5RHJHYSxhQW1GZEMsbUJBZGYsU0FBeUJwQixHQUN2QixNQUFPLENBQ0xGLFlBQWFFLEVBQU1GLFlBQ25CMkMsZUFBZ0J6QyxFQUFNNkMsb0JBQ3RCaEMsVUFBV2IsRUFBTWEsY0FJckIsU0FBNEJRLEdBQzFCLE1BQU8sQ0FDTGMsWUFBYSxTQUFDaEQsR0FBRCxPQUFVa0MsRUFBU3lCLFlBQXlCM0QsUUFJOUNpQyxDQUE2Q00sRywrMUJDbkZ0RHFCLEUsWUFFSixXQUFZakUsR0FBTyxNLGlHQUFBLFMsRUFDakIsSyxFQUFBLGVBQU1BLEdBQU4sRyxnREFEaUIsNkJBOENFLFdBQ25CQyxNQUFNLHFDQUNMQyxNQUFLLFNBQUFDLEdBQUcsT0FBSUEsRUFBSUMsVUFDaEJGLE1BQUssU0FBQWdFLEdBQ0osRUFBSzVELFNBQVMsQ0FDWkMsV0FBWTJELEVBQU0zRCxtQkFqRHRCLEVBQUtXLE1BQUwsR0FDRTJCLFFBQVMsR0FDVHRDLFdBQVksR0FDWnVDLFNBQVUsSUFIWixhQUljLElBR2QsRUFBS0MsT0FBU0MsSUFBRyxrQkFFakIsRUFBS0QsT0FBT0UsS0FBSyxTQUFVLENBQUVULE9BQVEsRUFBS3hDLE1BQU1nQixZQUFZQyxNQUU1RCxFQUFLOEIsT0FBT0csR0FBRywyQkFBMkIsU0FBUzdDLEdBQ2pEOEQsUUFBUUMsSUFBSS9ELEVBQU0sZ0JBQ2xCOEMsRUFBVzlDLE1BR2IsSUFBTThDLEVBQWEsU0FBQTlDLEdBQ2pCLElBQU1nRSxFQUFhLENBQ2pCdkQsT0FBUSxFQUFLZCxNQUFNYyxPQUNuQkMsU0FBVSxFQUFLZixNQUFNZ0IsWUFBWUMsSUFDakM2QixTQUFVekMsR0FFWixFQUFLTCxNQUFNbUQsV0FBV2tCLElBeEJQLE9BMkJqQixFQUFLZixhQUFlLFNBQUM3QyxHQUNuQixFQUFLSCxTQUFMLEtBQ0dHLEVBQUVFLE9BQU91QixLQUFPekIsRUFBRUUsT0FBTzRDLFNBSTlCLEVBQUtDLGtCQUFvQixTQUFDL0MsR0FDeEJBLEVBQUVnRCxpQkFENEIsSUFFdEJaLEVBQVksRUFBSzNCLE1BQWpCMkIsUUFGc0IsRUFHRSxFQUFLN0MsTUFBN0JnQixFQUhzQixFQUd0QkEsWUFBYUYsRUFIUyxFQUdUQSxPQUNyQixFQUFLaUMsT0FBT0UsS0FBSyx1QkFBd0IsQ0FDdkNuQyxTQUNBQyxTQUFVQyxFQUFZQyxJQUN0QjRCLFFBQVNBLElBRVgsRUFBS3ZDLFNBQVMsQ0FBQ3VDLFFBQVMsTUExQ1QsRSxnU0F3RFYsTUFDbUMxQixLQUFLbkIsTUFBdkNnQixFQURELEVBQ0NBLFlBQWFGLEVBRGQsRUFDY0EsT0FBUWdDLEVBRHRCLEVBQ3NCQSxTQUM3QixPQUNFLHlCQUFLekIsVUFBVSxZQUNiLDZCQUVJRixLQUFLRCxNQUFNWCxXQUFXb0IsS0FBSSxTQUFDUSxFQUFNTixHQUMvQixHQUFHTSxFQUFLbEIsTUFBUUgsRUFDZCxPQUFPLHdCQUFJZ0IsSUFBS0QsRUFBR1IsVUFBVSxlQUFlYyxFQUFLRCxTQU1yRFksRUFBU25CLEtBQUksU0FBQ2tCLEVBQVNoQixHQUNyQixPQUFHZ0IsRUFBUTlCLFdBQWFDLEVBQVlDLElBQzNCLHlCQUFLYSxJQUFLRCxFQUFHUixVQUFVLHdCQUF1QiwwQkFBTUEsVUFBVSx5QkFBeUJ3QixFQUFRQSxRQUFqRCxNQUU5Qyx5QkFBS2YsSUFBS0QsRUFBR1IsVUFBVSx3QkFBdUIsMEJBQU1BLFVBQVUsbUJBQW1Cd0IsRUFBUUEsUUFBM0MsVUFLN0QsMEJBQU1nQixTQUFVMUMsS0FBS3FDLGtCQUFtQm5DLFVBQVUsZUFDaEQsMkJBQU9hLEtBQUssVUFBVWIsVUFBVSxvQkFBb0JrQyxNQUFPcEMsS0FBS0QsTUFBTTJCLFFBQVNpQixTQUFVM0MsS0FBS21DLGFBQWM5QixZQUFZLG1CLDhCQWxGckdhLGFBdUdkQyxtQkFkZixTQUF5QnBCLEdBQ3ZCLE1BQU8sQ0FDTEYsWUFBYUUsRUFBTUYsWUFDbkJGLE9BQVFJLEVBQU1KLE9BQ2RnQyxTQUFVNUIsRUFBTW9ELHlCQUlwQixTQUE0Qi9CLEdBQzFCLE1BQU8sQ0FDTFksV0FBWSxTQUFDOUMsR0FBRCxPQUFVa0MsRUFBU2dDLFlBQWtCbEUsUUFJdENpQyxDQUE2QzJCLEcseTRCQ3RHdERPLEUsNldBRUssTUFDdUJyRCxLQUFLbkIsTUFBM0JjLEVBREQsRUFDQ0EsT0FBUWlCLEVBRFQsRUFDU0EsVUFDaEIsT0FDRSx5QkFBS1YsVUFBVSxhQUNiLGtCQUFDLEVBQUQsTUFFRVAsRUFBUyxrQkFBQyxFQUFELE1BQXFCaUIsRUFDMUIsa0JBQUMsRUFBRCxNQUNBLHlCQUFLVixVQUFVLGFBQ2IsdUJBQUdBLFVBQVUsNEJBQWIsaUgsOEJBWFFnQixhQTBCVEMsdUJBUGYsU0FBeUJwQixHQUN2QixNQUFPLENBQ0xKLE9BQVFJLEVBQU1KLE9BQ2RpQixVQUFXYixFQUFNYSxhQUlOTyxDQUF5QmtDIiwiZmlsZSI6IjEuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBzZXRUb1VzZXJBY3Rpb24sIG9wZW5lZENoYW5uZWxDaGF0Um9vbUFjdGlvbiB9IGZyb20gJy4uL2FjdGlvbnMvaW5kZXgnO1xuY2xhc3MgQXNpZGUgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBsaXN0T2ZVc2VyOiBbXSxcbiAgICAgIGxpc3RPZkNoYW5uZWw6IFtdLFxuICAgIH07XG5cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCA9ICgpID0+IHtcbiAgICAvLyBmZXRjaCBhbGwgdXNlciBkYXRhIGZyb20gZGF0YWJhc2VcbiAgICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9hbGxVc2VyJylcbiAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBsaXN0T2ZVc2VyOiBkYXRhLmxpc3RPZlVzZXJcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgLy8gZmV0Y2ggYWxsIGNoYW5uZWwgZGF0YSBmcm9tIGRhdGFiYXNlXG4gICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvYWxsQ2hhbm5lbCcpXG4gICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgbGlzdE9mQ2hhbm5lbDogZGF0YS5saXN0T2ZDaGFubmVsXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvLyBoYW5kbGVkIGNsaWNrIGFjdGlvbiBvbiBjaGFubmVsXG4gIGhhbmRsZUNoYW5uZWwgPSAoZSkgPT4ge1xuICAgIHRoaXMucHJvcHMub3BlbmVkQ2hhbm5lbENoYXRSb29tKGUudGFyZ2V0LmlkKTtcbiAgfVxuXG4gIC8vIGhhbmRsZWQgY2xpY2sgYWN0aW9uIG9uIHVzZXJzXG4gIGhhbmRsZVVzZXIgPSAoZSkgPT4ge1xuICAgIHRoaXMucHJvcHMuc2V0VG9Vc2VyKHt0b1VzZXI6IGUudGFyZ2V0LmlkLCBmcm9tVXNlcjogdGhpcy5wcm9wcy5jdXJyZW50VXNlci5faWR9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGxpc3RPZkNoYW5uZWwsIGxpc3RPZlVzZXIgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgIHVzZXJuYW1lICA9IHRoaXMucHJvcHMuY3VycmVudFVzZXIgPyB0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXJuYW1lIDogJycgO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxhc2lkZSBjbGFzc05hbWU9J3NpZGUtYmFyJz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPSd0aXRsZS1jb250YWluZXInPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndXNlci1uYW1lJz57dXNlcm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxhIGhyZWY9Jy9sb2dvdXQnIGNsYXNzTmFtZT0ncmlnaHQgbG9nb3V0Jz5sb2dvdXQ8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3NOYW1lPSdzZWFyY2hCb3gnIHBsYWNlaG9sZGVyPSdKdW1wIHRvIC4uLic+PC9pbnB1dD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGl0bGUtY29udGFpbmVyJz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0aXRsZSc+Q2hhbm5lbHM8L3NwYW4+XG4gICAgICAgICAgICAgIDxhIHRpdGxlPSdDcmVhdGUgYSBjaGFubmVsJyBocmVmPScvY3JlYXRlJyBjbGFzc05hbWU9J3JpZ2h0IGFkZC1jaGFubmVsJz4rPC9hPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgbGlzdE9mQ2hhbm5lbC5sZW5ndGggJiYgbGlzdE9mQ2hhbm5lbC5tYXAoKGNoYW5uZWwsIGkpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIDxwIGtleT17aX0gY2xhc3NOYW1lPXt0aGlzLnByb3BzLnRvQ2hhbm5lbCA9PSBjaGFubmVsLl9pZCA/ICdzZWxlY3RlZCBjaGFubmVsLWxpc3QnIDogJ2NoYW5uZWwtbGlzdCd9IFxuICAgICAgICAgICAgICAgIGlkPXtjaGFubmVsLl9pZH0gb25DbGljaz17dGhpcy5oYW5kbGVDaGFubmVsfT48c3BhbiBjbGFzc05hbWU9J2NoYW5uZWwtbG9nbyc+JDwvc3Bhbj4ge2NoYW5uZWwubmFtZX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGl0bGUtY29udGFpbmVyJz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGl0bGUnPkRpcmVjdCBNZXNzYWdlczwvc3Bhbj5cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAge1xuICAgICAgICAgICAgbGlzdE9mVXNlciAmJiBsaXN0T2ZVc2VyLm1hcCgodXNlciwgaSkgPT4ge1xuICAgICAgICAgICAgICBpZih1c2VyLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiA8cCBrZXk9e2l9IGNsYXNzTmFtZT17dGhpcy5wcm9wcy50b1VzZXIgPT0gdXNlci5faWQgPyAnc2VsZWN0ZWQgdXNlcm5hbWUtbGlzdCcgOiAndXNlcm5hbWUtbGlzdCd9IFxuICAgICAgICAgICAgICAgIGlkPXt1c2VyLl9pZH0gb25DbGljaz17dGhpcy5oYW5kbGVVc2VyfT48c3BhbiBjbGFzc05hbWU9J29ubGluZS11c2VyJz48L3NwYW4+e3VzZXIudXNlcm5hbWV9KHlvdSlcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gPHAga2V5PXtpfSBjbGFzc05hbWU9e3RoaXMucHJvcHMudG9Vc2VyID09IHVzZXIuX2lkID8gJ3NlbGVjdGVkIHVzZXJuYW1lLWxpc3QnIDogJ3VzZXJuYW1lLWxpc3QnfSBcbiAgICAgICAgICAgICAgICBpZD17dXNlci5faWR9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlVXNlcn0+PHNwYW4gY2xhc3NOYW1lPSdvZmZsaW5lLXVzZXInPjwvc3Bhbj57dXNlci51c2VybmFtZX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2FzaWRlPlxuICAgIClcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50VXNlcjogc3RhdGUuY3VycmVudFVzZXIsXG4gICAgdG9Vc2VyOiBzdGF0ZS50b1VzZXIsXG4gICAgdG9DaGFubmVsOiBzdGF0ZS50b0NoYW5uZWwsXG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzKGRpc3BhdGNoKSB7XG4gIHJldHVybiB7XG4gICAgZGlzcGF0Y2gsXG4gICAgc2V0VG9Vc2VyOiAodXNlcklkKSA9PiBkaXNwYXRjaChzZXRUb1VzZXJBY3Rpb24odXNlcklkKSksXG4gICAgb3BlbmVkQ2hhbm5lbENoYXRSb29tOiAoY2hhbm5lbElkKSA9PiBkaXNwYXRjaChvcGVuZWRDaGFubmVsQ2hhdFJvb21BY3Rpb24oY2hhbm5lbElkKSksXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoQXNpZGUpO1xuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBhZGRDaGFubmVsTWVzc2FnZXNBY3Rpb24gfSBmcm9tICcuLi9hY3Rpb25zL2luZGV4JztcblxuY2xhc3MgQ2hhbm5lbE1lc3NhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBtZXNzYWdlOiAnJyxcbiAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgIGxpc3RPZlVzZXI6IFtdLFxuICAgIH07XG5cbiAgICB0aGlzLnNvY2tldCA9IGlvKCdsb2NhbGhvc3Q6ODAwMCcpO1xuXG4gICAgdGhpcy5zb2NrZXQuZW1pdCgnT05MSU5FJywgeyB1c2VySWQ6IHRoaXMucHJvcHMuY3VycmVudFVzZXIuX2lkIH0pO1xuXG4gICAgdGhpcy5zb2NrZXQub24oJ1JFQ0VJVkVfQ0hBTk5FTF9NRVNTQUdFJywgZnVuY3Rpb24oZGF0YSl7XG4gICAgICBhZGRNZXNzYWdlKGRhdGEpO1xuICAgIH0pO1xuICBcbiAgICBjb25zdCBhZGRNZXNzYWdlID0gbWVzc2FnZUluZm8gPT4ge1xuICAgICAgdGhpcy5wcm9wcy5hZGRNZXNzYWdlcyh0aGlzLnByb3BzLnRvQ2hhbm5lbCk7XG4gICAgfTtcblxuICAgIHRoaXMuaGFuZGxlQ2hhbmdlID0gKGUpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlXG4gICAgICB9KVxuICAgIH1cbiAgXG4gICAgdGhpcy5oYW5kbGVTZW5kTWVzc2FnZSA9IChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNvY2tldC5lbWl0KCdTRU5EX0NIQU5ORUxfTUVTU0FHRScsIHtcbiAgICAgICAgdG9DaGFubmVsOiB0aGlzLnByb3BzLnRvQ2hhbm5lbCxcbiAgICAgICAgYXV0aG9yOiB0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXJuYW1lLFxuICAgICAgICBtZXNzYWdlOiB0aGlzLnN0YXRlLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVzc2FnZTogJyd9KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjdXJyZW50Q2hhbm5lbCwgY3VycmVudFVzZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGF0QXJlYSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGF0Q29udGFpbmVyJz5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPSdjZW50ZXIgbmFtZSc+e3RoaXMucHJvcHMuY3VycmVudENoYW5uZWwubmFtZX08L2gxPlxuICAgICAgICAgIHsgXG4gICAgICAgICAgICAoY3VycmVudENoYW5uZWwubWVzc2FnZXMpICYmXG4gICAgICAgICAgICBjdXJyZW50Q2hhbm5lbC5tZXNzYWdlcy5tYXAoKG1zZywgaSkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J21lc3NhZ2UtaW5mby1jb250YWluZXInIGtleT17aX0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgKG1zZy51c2VybmFtZSA9PT0gY3VycmVudFVzZXIudXNlcm5hbWUpID8gXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21lc3NhZ2UtdXNlci1pbWcnPjwvc3Bhbj4gOlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWVzc2FnZS11c2VyLWltZyBtc2ctdXNyLWJhY2tncm91bmRcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZXNzYWdlLWluZm8nPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd1c2VyLW5hbWUnPnttc2cudXNlcm5hbWV9PC9zcGFuPiA8c3Bhbj57bXNnLm1lc3NhZ2V9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU2VuZE1lc3NhZ2V9IGNsYXNzTmFtZT0nc2VuZE1zZ0Zvcm0nPlxuICAgICAgICAgIDxpbnB1dCBuYW1lPSdtZXNzYWdlJyBjbGFzc05hbWU9J2lucHV0IG1lc3NhZ2UtYm94JyB2YWx1ZT17dGhpcy5zdGF0ZS5tZXNzYWdlfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9IHBsYWNlaG9sZGVyPSdNZXNzYWdlJyAvPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgY3VycmVudFVzZXI6IHN0YXRlLmN1cnJlbnRVc2VyLFxuICAgIGN1cnJlbnRDaGFubmVsOiBzdGF0ZS5zZWxlY3RlZENoYW5uZWxJbmZvLFxuICAgIHRvQ2hhbm5lbDogc3RhdGUudG9DaGFubmVsLFxuICB9XG59XG5cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIGFkZE1lc3NhZ2VzOiAoZGF0YSkgPT4gZGlzcGF0Y2goYWRkQ2hhbm5lbE1lc3NhZ2VzQWN0aW9uKGRhdGEpKSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShDaGFubmVsTWVzc2FnZSk7XG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGlvIGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IGFkZE1lc3NhZ2VzQWN0aW9uIH0gZnJvbSAnLi4vYWN0aW9ucy9pbmRleCc7XG5cbmNsYXNzIFByaXZhdGVNZXNzYWdlIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbWVzc2FnZTogJycsXG4gICAgICBsaXN0T2ZVc2VyOiBbXSxcbiAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgIGxpc3RPZlVzZXI6IFtdLFxuICAgIH07XG5cbiAgICB0aGlzLnNvY2tldCA9IGlvKCdsb2NhbGhvc3Q6ODAwMCcpO1xuXG4gICAgdGhpcy5zb2NrZXQuZW1pdCgnT05MSU5FJywgeyB1c2VySWQ6IHRoaXMucHJvcHMuY3VycmVudFVzZXIuX2lkIH0pXG5cbiAgICB0aGlzLnNvY2tldC5vbignUkVDRUlWRV9QUklWQVRFX01FU1NBR0UnLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEsIFwicmVjZWl2ZWQgbXNnXCIpXG4gICAgICBhZGRNZXNzYWdlKGRhdGEpO1xuICAgIH0pO1xuICBcbiAgICBjb25zdCBhZGRNZXNzYWdlID0gZGF0YSA9PiB7XG4gICAgICBjb25zdCBtc2dEZXRhaWxzID0ge1xuICAgICAgICB0b1VzZXI6IHRoaXMucHJvcHMudG9Vc2VyLFxuICAgICAgICBmcm9tVXNlcjogdGhpcy5wcm9wcy5jdXJyZW50VXNlci5faWQsXG4gICAgICAgIG1lc3NhZ2VzOiBkYXRhLFxuICAgICAgfVxuICAgICAgdGhpcy5wcm9wcy5hZGRNZXNzYWdlKG1zZ0RldGFpbHMpO1xuICAgIH07XG5cbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgICAgfSlcbiAgICB9O1xuICBcbiAgICB0aGlzLmhhbmRsZVNlbmRNZXNzYWdlID0gKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIGNvbnN0IHsgY3VycmVudFVzZXIsIHRvVXNlciB9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ1NFTkRfUFJJVkFURV9NRVNTQUdFJywge1xuICAgICAgICB0b1VzZXIsXG4gICAgICAgIGZyb21Vc2VyOiBjdXJyZW50VXNlci5faWQsXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVzc2FnZTogJyd9KTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQgPSAoKSA9PiB7XG4gICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvYWxsVXNlcicpXG4gICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4odXNlcnMgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGxpc3RPZlVzZXI6IHVzZXJzLmxpc3RPZlVzZXJcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGN1cnJlbnRVc2VyLCB0b1VzZXIsIG1lc3NhZ2VzIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hhdEFyZWEnPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubGlzdE9mVXNlci5tYXAoKHVzZXIsIGkpID0+IHtcbiAgICAgICAgICAgICAgaWYodXNlci5faWQgPT09IHRvVXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiA8aDEga2V5PXtpfSBjbGFzc05hbWU9J2NlbnRlciBuYW1lJz57dXNlci5uYW1lfTwvaDE+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaSkgPT4ge1xuICAgICAgICAgICAgICBpZihtZXNzYWdlLmZyb21Vc2VyID09PSBjdXJyZW50VXNlci5faWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT0nY3VycmVudFVzZXItbXNnLXdyYXAnPjxzcGFuIGNsYXNzTmFtZT0ncmlnaHQgY3VycmVudFVzZXItbXNnJz57bWVzc2FnZS5tZXNzYWdlfSA8L3NwYW4+PC9kaXY+XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J2Fub3RoZXJVc2VyLW1zZy13cmFwJz48c3BhbiBjbGFzc05hbWU9J2Fub3RoZXJVc2VyLW1zZyc+e21lc3NhZ2UubWVzc2FnZX0gPC9zcGFuPjwvZGl2PlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVNlbmRNZXNzYWdlfSBjbGFzc05hbWU9J3NlbmRNc2dGb3JtJz5cbiAgICAgICAgICA8aW5wdXQgbmFtZT0nbWVzc2FnZScgY2xhc3NOYW1lPSdpbnB1dCBtZXNzYWdlLWJveCcgdmFsdWU9e3RoaXMuc3RhdGUubWVzc2FnZX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfSBwbGFjZWhvbGRlcj0nTWVzc2FnZScgLz5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIGN1cnJlbnRVc2VyOiBzdGF0ZS5jdXJyZW50VXNlcixcbiAgICB0b1VzZXI6IHN0YXRlLnRvVXNlcixcbiAgICBtZXNzYWdlczogc3RhdGUuc2VsZWN0ZWRVc2VyTWVzc2FnZXMsXG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzKGRpc3BhdGNoKSB7XG4gIHJldHVybiB7XG4gICAgYWRkTWVzc2FnZTogKGRhdGEpID0+IGRpc3BhdGNoKGFkZE1lc3NhZ2VzQWN0aW9uKGRhdGEpKSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShQcml2YXRlTWVzc2FnZSk7XG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBBc2lkZSBmcm9tICcuL0FzaWRlJztcbmltcG9ydCBDaGFubmVsTWVzc2FnZSBmcm9tICcuL0NoYW5uZWxNZXNzYWdlJztcbmltcG9ydCBQcml2YXRlTWVzc2FnZSBmcm9tICcuL1ByaXZhdGVNZXNzYWdlJztcblxuY2xhc3MgRGFzaGJvYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB0b1VzZXIsIHRvQ2hhbm5lbCB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2Rhc2hib2FyZCc+XG4gICAgICAgIDxBc2lkZSAvPlxuICAgICAgICB7XG4gICAgICAgICAgdG9Vc2VyID8gPFByaXZhdGVNZXNzYWdlIC8+IDogdG9DaGFubmVsIFxuICAgICAgICAgICAgPyA8Q2hhbm5lbE1lc3NhZ2UgLz4gXG4gICAgICAgICAgICA6IDxkaXYgY2xhc3NOYW1lPSduZXdzLWZlZWQnPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm5ld3MtZmVlZC1jb250ZW50IGNlbnRlclwiPlRoZSBOZXdzRmVlZCBhcmVhIHN0aWxsIGluIHRoZSBtYWtpbmcgcHJvY2Vzcywgc28gcGxlYXNlIHNlbGVjdCBhbnkgZnJpZW5kcyBvciBjaGFubmVsIENoYXQtUm9vbS1BcmVhLjwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICB0b1VzZXI6IHN0YXRlLnRvVXNlcixcbiAgICB0b0NoYW5uZWw6IHN0YXRlLnRvQ2hhbm5lbCxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcykoRGFzaGJvYXJkKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=